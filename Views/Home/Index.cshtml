@{
    ViewData["Title"] = "Accueil - mealFinderDotNet";
}

<!-- Skip to content link for accessibility -->
<a href="#main-content" class="skip-to-content">Aller au contenu</a>

<!-- Hero Section -->
<section class="hero-section" id="main-content">
    <div class="hero-particles" id="particles"></div>
    <div class="container">
        <div class="hero-content animate-fade-in-up">
            <h1 class="hero-title">Découvrez Votre Prochaine Recette Préférée</h1>

            <p class="hero-subtitle">
                Des milliers de recettes délicieuses créées par des chefs passionnés.
                Trouvez l'inspiration pour chaque repas de la journée.
            </p>

            <div class="hero-search">
                <div class="search-container" id="searchContainer">
                    <form asp-controller="Recipe" asp-action="Search" method="get" class="search-form">
                        <input type="search"
                               name="query"
                               id="searchInput"
                               class="search-input"
                               placeholder="Recherchez une recette ou un ingrédient (tomate, poulet...)"
                               aria-label="Rechercher des recettes"
                               required />

                        <button class="btn btn-primary search-button" type="submit" id="searchButton">
                            <i class="fas fa-search"></i>
                            <span>Rechercher</span>
                        </button>
                    </form>
                </div>

                <div class="mt-3">
                    <small class="#9CA3AF" style="opacity: 0.8;">
                        Suggestions : Pasta Carbonara, Salade César, Burger Gourmet
                    </small>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Catégories Populaires -->
<section class="section section-bg-light" id="categories">
    <div class="container">
        <div class="section-title">
            <h2>Catégories Populaires</h2>
            <p class="section-subtitle">
                Explorez nos catégories les plus appréciées pour trouver l'inspiration
            </p>
        </div>

        <div class="categories-grid stagger-animation">
            <!-- Catégorie 1 -->
            <article class="category-card">
                <div class="category-icon">
                    🍳
                </div>
                <h3 class="category-title">Petit Déjeuner</h3>
                <p class="category-description">
                    Commencez votre journée avec énergie
                </p>
                <div class="category-count">125+ recettes</div>
             
            </article>

            <!-- Catégorie 2 -->
            <article class="category-card">
                <div class="category-icon">
                    🍝
                </div>
                <h3 class="category-title">Déjeuner</h3>
                <p class="category-description">
                    Des plats savoureux pour le midi
                </p>
                <div class="category-count">89+ recettes</div>
             
            </article>

            <!-- Catégorie 3 -->
            <article class="category-card">
                <div class="category-icon">
                    🍲
                </div>
                <h3 class="category-title">Dîner</h3>
                <p class="category-description">
                    Terminez la journée en beauté
                </p>
                <div class="category-count">156+ recettes</div>
              
            </article>

            <!-- Catégorie 4 -->
            <article class="category-card">
                <div class="category-icon">
                    🍰
                </div>
                <h3 class="category-title">Desserts</h3>
                <p class="category-description">
                    Des douceurs irrésistibles
                </p>
                <div class="category-count">78+ recettes</div>
              
            </article>

            <!-- Catégorie 5 -->
            <article class="category-card">
                <div class="category-icon">
                    🥗
                </div>
                <h3 class="category-title">Végétarien</h3>
                <p class="category-description">
                    Sain et délicieux sans viande
                </p>
                <div class="category-count">112+ recettes</div>
             
            </article>

            <!-- Catégorie 6 -->
            <article class="category-card">
                <div class="category-icon">
                    ⚡
                </div>
                <h3 class="category-title">Rapide</h3>
                <p class="category-description">
                    Prêt en moins de 30 minutes
                </p>
                <div class="category-count">94+ recettes</div>
                
            </article>
        </div>
    </div>
</section>

<!-- Recettes Populaires -->
<section class="section">
    <div class="container">
        <div class="section-title">
            <h2>Recettes du Moment</h2>
            <p class="section-subtitle">
                Découvrez les recettes les plus populaires de notre communauté
            </p>
        </div>

        <div class="recipe-grid stagger-animation">
            <!-- Recette 1 -->
            <article class="recipe-card">
                <div class="recipe-image">
                    <img src="https://images.unsplash.com/photo-1473093295043-cdd812d0e601?w=600&h=400&fit=crop&crop=center"
                         alt="Pasta Carbonara"
                         loading="lazy">
                    <span class="recipe-badge">Nouveau</span>
                </div>
                <div class="recipe-content">
                    <div class="recipe-header">
                        <h3 class="recipe-title">Pasta Carbonara Authentique</h3>
                        <p class="recipe-description">
                            Un classique italien crémeux et délicieux préparé avec des œufs, du parmesan et du guanciale.
                        </p>
                    </div>
                    <div class="recipe-meta">
                        <span class="recipe-meta-item">
                            <i class="fas fa-clock"></i>
                            <span>30 min</span>
                        </span>
                        <span class="recipe-meta-item">
                            <i class="fas fa-user-friends"></i>
                            <span>4 pers.</span>
                        </span>
                        <span class="recipe-meta-item">
                            <i class="fas fa-star"></i>
                            <span>4.8/5</span>
                        </span>
                    </div>
                    <div class="recipe-footer">
                        <a href="#" class="btn btn-primary">
                            <i class="fas fa-utensils"></i>
                            Voir la recette
                        </a>
                    </div>
                </div>
            </article>

            <!-- Recette 2 -->
            <article class="recipe-card">
                <div class="recipe-image">
                    <img src="https://images.unsplash.com/photo-1598103442097-8b74394b95c6?w=600&h=400&fit=crop&crop=center"
                         alt="Poulet Rôti aux Herbes"
                         loading="lazy">
                    <span class="recipe-badge">Populaire</span>
                </div>
                <div class="recipe-content">
                    <div class="recipe-header">
                        <h3 class="recipe-title">Poulet Rôti aux Herbes</h3>
                        <p class="recipe-description">
                            Tendre et savoureux, parfait pour un repas familial avec des herbes fraîches du jardin.
                        </p>
                    </div>
                    <div class="recipe-meta">
                        <span class="recipe-meta-item">
                            <i class="fas fa-clock"></i>
                            <span>90 min</span>
                        </span>
                        <span class="recipe-meta-item">
                            <i class="fas fa-user-friends"></i>
                            <span>6 pers.</span>
                        </span>
                        <span class="recipe-meta-item">
                            <i class="fas fa-star"></i>
                            <span>4.9/5</span>
                        </span>
                    </div>
                    <div class="recipe-footer">
                        <a href="#" class="btn btn-primary">
                            <i class="fas fa-utensils"></i>
                            Voir la recette
                        </a>
                    </div>
                </div>
            </article>

            <!-- Recette 3 -->
            <article class="recipe-card">
                <div class="recipe-image">
                    <img src="https://images.unsplash.com/photo-1565958011703-44f9829ba187?w=600&h=400&fit=crop&crop=center"
                         alt="Salade Healthy"
                         loading="lazy">
                    <span class="recipe-badge">Healthy</span>
                </div>
                <div class="recipe-content">
                    <div class="recipe-header">
                        <h3 class="recipe-title">Salade Healthy Avocat & Quinoa</h3>
                        <p class="recipe-description">
                            Une salade nutritive et savoureuse parfaite pour un déjeuner équilibré et énergétique.
                        </p>
                    </div>
                    <div class="recipe-meta">
                        <span class="recipe-meta-item">
                            <i class="fas fa-clock"></i>
                            <span>20 min</span>
                        </span>
                        <span class="recipe-meta-item">
                            <i class="fas fa-user-friends"></i>
                            <span>2 pers.</span>
                        </span>
                        <span class="recipe-meta-item">
                            <i class="fas fa-star"></i>
                            <span>4.7/5</span>
                        </span>
                    </div>
                    <div class="recipe-footer">
                        <a href="#" class="btn btn-primary">
                            <i class="fas fa-utensils"></i>
                            Voir la recette
                        </a>
                    </div>
                </div>
            </article>

            <!-- Recette 4 -->
            <article class="recipe-card">
                <div class="recipe-image">
                    <img src="https://images.unsplash.com/photo-1488477181946-6428a0291777?w=600&h=400&fit=crop&crop=center"
                         alt="Gâteau au Chocolat"
                         loading="lazy">
                    <span class="recipe-badge">Favori</span>
                </div>
                <div class="recipe-content">
                    <div class="recipe-header">
                        <h3 class="recipe-title">Gâteau au Chocolat Fondant</h3>
                        <p class="recipe-description">
                            Un gâteau au chocolat moelleux et fondant qui fera le bonheur de tous les gourmands.
                        </p>
                    </div>
                    <div class="recipe-meta">
                        <span class="recipe-meta-item">
                            <i class="fas fa-clock"></i>
                            <span>45 min</span>
                        </span>
                        <span class="recipe-meta-item">
                            <i class="fas fa-user-friends"></i>
                            <span>8 pers.</span>
                        </span>
                        <span class="recipe-meta-item">
                            <i class="fas fa-star"></i>
                            <span>4.9/5</span>
                        </span>
                    </div>
                    <div class="recipe-footer">
                        <a href="#" class="btn btn-primary">
                            <i class="fas fa-utensils"></i>
                            Voir la recette
                        </a>
                    </div>
                </div>
            </article>
        </div>

        <div class="text-center mt-6">
            <a href="@Url.Action("Index", "Recipe")" class="btn btn-outline btn-lg">
                <i class="fas fa-book-open"></i>
                Voir toutes les recettes
            </a>
        </div>
    </div>
</section>

<!-- Comment ça marche -->
<section class="section section-bg-light" id="how-it-works">
    <div class="container">
        <div class="section-title">
            <h2>Comment Ça Marche ?</h2>
            <p class="section-subtitle">
                Trouvez, cuisinez et savourez en 3 étapes simples
            </p>
        </div>

        <div class="steps-container stagger-animation">
            <!-- Étape 1 -->
            <article class="step-card">
                <div class="step-number">1</div>
                <div class="step-icon">🔍</div>
                <h3 class="step-title">Recherchez</h3>
                <p class="step-description">
                    Explorez notre bibliothèque de milliers de recettes ou recherchez par ingrédients, régime ou temps de préparation.
                </p>
            </article>

            <!-- Étape 2 -->
            <article class="step-card">
                <div class="step-number">2</div>
                <div class="step-icon">👨‍🍳</div>
                <h3 class="step-title">Cuisinez</h3>
                <p class="step-description">
                    Suivez nos instructions étape par étape avec des photos et vidéos pour des résultats parfaits à chaque fois.
                </p>
            </article>

            <!-- Étape 3 -->
            <article class="step-card">
                <div class="step-number">3</div>
                <div class="step-icon">😋</div>
                <h3 class="step-title">Savourez</h3>
                <p class="step-description">
                    Partagez vos créations culinaires avec notre communauté et notez vos recettes préférées.
                </p>
            </article>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="section cta-section">
    <div class="container">
        <div class="cta-content animate-fade-in-up">
            <h2 class="cta-title">Prêt à Devenir un Chef à la Maison ?</h2>
            <p class="cta-description">
                Rejoignez notre communauté de plus de 50,000 passionnés de cuisine.
                Accédez à des recettes exclusives, créez vos propres collections et partagez vos créations.
            </p>

            <div class="cta-buttons">
                <a href="#" class="btn btn-light btn-lg">
                    <i class="fas fa-user-plus"></i>
                    Créer un compte gratuit
                </a>
                <a href="#" class="btn btn-outline-light btn-lg">
                    <i class="fas fa-play-circle"></i>
                    Voir la démo
                </a>
            </div>

            <div class="mt-4">
                <small style="opacity: 0.9;">
                    <i class="fas fa-check-circle"></i>
                    Aucune carte de crédit requise • 7 jours d'essai gratuit
                </small>
            </div>
        </div>
    </div>
</section>

<!-- Font Awesome & Google Fonts -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">

<script>
    // Particle effect for hero section
    function createParticles() {
        const container = document.getElementById('particles');
        if (!container) return;

        // Clear existing particles
        container.innerHTML = '';

        for (let i = 0; i < 50; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.width = Math.random() * 10 + 2 + 'px';
            particle.style.height = particle.style.width;
            particle.style.left = Math.random() * 100 + '%';
            particle.style.top = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 20 + 's';
            particle.style.opacity = Math.random() * 0.3 + 0.1;
            container.appendChild(particle);
        }
    }

    // Search functionality
    function searchRecipes() {
        const searchValue = document.getElementById('searchInput').value.trim();
        if (searchValue) {
            // Add loading state
            const button = document.getElementById('searchButton');
            const originalHTML = button.innerHTML;
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Recherche...';
            button.classList.add('loading');
            button.disabled = true;

            // In real application, this would be an API call
            // For now, simulate loading and redirect
            setTimeout(() => {
                window.location.href = `/Recipe/Search?query=${encodeURIComponent(searchValue)}`;
            }, 800);
        }
        return false;
    }

    // Intersection Observer for animations
    function initAnimations() {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-visible');
                    observer.unobserve(entry.target);
                }
            });
        }, {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        });

        // Observe all cards for animation
        document.querySelectorAll('.recipe-card, .category-card, .step-card').forEach((el) => {
            observer.observe(el);
        });

        // Observe sections for title animations
        document.querySelectorAll('.section-title').forEach((el) => {
            observer.observe(el);
        });
    }

    // Initialize everything when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
        // Create particle effect
        createParticles();

        // Initialize animations
        initAnimations();

        // Handle search form submission
        const searchForm = document.querySelector('.search-form');
        if (searchForm) {
            searchForm.addEventListener('submit', function(e) {
                e.preventDefault();
                searchRecipes();
            });
        }

        // Add Enter key support for search input
        const searchInput = document.getElementById('searchInput');
        if (searchInput) {
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    searchRecipes();
                }
            });

            // Handle search input focus for visual feedback
            searchInput.addEventListener('focus', function() {
                const container = document.getElementById('searchContainer');
                if (container) {
                    container.classList.add('focused');
                }
            });

            searchInput.addEventListener('blur', function() {
                const container = document.getElementById('searchContainer');
                if (container) {
                    container.classList.remove('focused');
                }
            });

            // Add input event for suggestions
            searchInput.addEventListener('input', function() {
                // Could add real-time suggestions here
                console.log('Search input:', this.value);
            });
        }

        // Smooth scroll for skip-to-content link
        const skipLink = document.querySelector('.skip-to-content');
        if (skipLink) {
            skipLink.addEventListener('click', function(e) {
                e.preventDefault();
                const targetElement = document.querySelector(this.getAttribute('href'));
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                    // Focus the first element in the main content for accessibility
                    setTimeout(() => {
                        targetElement.setAttribute('tabindex', '-1');
                        targetElement.focus();
                    }, 500);
                }
            });
        }

        // Add hover effects to cards
        document.querySelectorAll('.category-card, .recipe-card, .step-card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transition = 'transform 0.3s ease, box-shadow 0.3s ease';
            });
        });

        // Initialize tooltips for buttons (if needed)
        document.querySelectorAll('[data-tooltip]').forEach(element => {
            element.addEventListener('mouseenter', function() {
                const tooltip = this.getAttribute('data-tooltip');
                // Create and show tooltip
                const tooltipEl = document.createElement('div');
                tooltipEl.className = 'tooltip';
                tooltipEl.textContent = tooltip;
                document.body.appendChild(tooltipEl);

                const rect = this.getBoundingClientRect();
                tooltipEl.style.position = 'fixed';
                tooltipEl.style.left = rect.left + 'px';
                tooltipEl.style.top = rect.top - tooltipEl.offsetHeight - 5 + 'px';
            });

            element.addEventListener('mouseleave', function() {
                const tooltip = document.querySelector('.tooltip');
                if (tooltip) {
                    tooltip.remove();
                }
            });
        });

        // Parallax effect for hero section
        window.addEventListener('scroll', function() {
            const heroSection = document.querySelector('.hero-section');
            if (heroSection) {
                const scrolled = window.pageYOffset;
                const rate = scrolled * -0.5;
                heroSection.style.backgroundPosition = `center ${rate}px`;
            }
        });

        // Add click handler for recipe badges
        document.querySelectorAll('.recipe-badge').forEach(badge => {
            badge.addEventListener('click', function(e) {
                e.stopPropagation();
                alert('Cette recette est ' + this.textContent.toLowerCase());
            });
        });

        // Add favorite functionality to recipe cards
        document.querySelectorAll('.recipe-card .recipe-title').forEach(title => {
            title.addEventListener('click', function(e) {
                e.preventDefault();
                const recipeTitle = this.textContent;
                console.log('Recipe clicked:', recipeTitle);
                // In a real app, you would navigate to the recipe detail page
            });
        });

    //     Load more recipes functionality
    //     const loadMoreBtn = document.querySelector('.btn-outline.btn-lg');
    //     if (loadMoreBtn) {
    //         loadMoreBtn.addEventListener('click', function(e) {
    //             e.preventDefault();
    //             this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Chargement...';
    //             setTimeout(() => {
    //                 this.innerHTML = '<i class="fas fa-book-open"></i> Plus de recettes chargées';
    //                 alert('Fonctionnalité "Voir plus" en développement. Plus de recettes seront chargées ici.');
    //             }, 1000);
    //         });
    //     }
    // });
        // Load more recipes functionality with redirection
    const loadMoreBtn = document.querySelector('.btn-outline.btn-lg');
    if (loadMoreBtn) {
        // Récupère l'URL du bouton (asp-controller/asp-action)
        const targetUrl = loadMoreBtn.getAttribute('href');

        loadMoreBtn.addEventListener('click', function(e) {
            e.preventDefault();
            this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Chargement...';
            this.disabled = true;

            setTimeout(() => {
                // Redirection vers l'action Index du RecipeController
                window.location.href = targetUrl;
            }, 1000);
        });
    }


    // Handle window resize for responsive adjustments
    window.addEventListener('resize', function() {
        // Recalculate particle positions on resize
        setTimeout(createParticles, 100);
    });

    // Add keyboard navigation support
    document.addEventListener('keydown', function(e) {
        // Focus search input with Ctrl/Cmd + K
        if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
            e.preventDefault();
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.focus();
            }
        }

        // Escape key clears search
        if (e.key === 'Escape') {
            const searchInput = document.getElementById('searchInput');
            if (searchInput && document.activeElement === searchInput) {
                searchInput.value = '';
            }
        }
    });

    // Add service worker for PWA functionality (optional)
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            navigator.serviceWorker.register('/sw.js').then(function(registration) {
                console.log('ServiceWorker registration successful with scope: ', registration.scope);
            }, function(err) {
                console.log('ServiceWorker registration failed: ', err);
            });
        });
    }

    // Add analytics tracking (optional)
    function trackEvent(category, action, label) {
        if (typeof gtag !== 'undefined') {
            gtag('event', action, {
                'event_category': category,
                'event_label': label
            });
        }
        console.log(`Event tracked: ${category} - ${action} - ${label}`);
    }

    // Track page views and interactions
    document.addEventListener('DOMContentLoaded', function() {
        trackEvent('page', 'view', 'homepage');

        // Track search submissions
        const searchForm = document.querySelector('.search-form');
        if (searchForm) {
            searchForm.addEventListener('submit', function() {
                const query = document.getElementById('searchInput').value;
                trackEvent('search', 'submit', query);
            });
        }

        // Track category clicks
        document.querySelectorAll('.category-card a').forEach(link => {
            link.addEventListener('click', function(e) {
                const category = this.closest('.category-card').querySelector('.category-title').textContent;
                trackEvent('category', 'click', category);
            });
        });

        // Track recipe clicks
        document.querySelectorAll('.recipe-card a').forEach(link => {
            link.addEventListener('click', function(e) {
                const recipe = this.closest('.recipe-card').querySelector('.recipe-title').textContent;
                trackEvent('recipe', 'click', recipe);
            });
        });
    });
</script>